<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Docs DataLbry Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Docs DataLbry Blog Atom Feed"><title data-react-helmet="true">Connector Documentation | Docs DataLbry</title><meta data-react-helmet="true" property="og:url" content="https://docs.datalbry.io/Integrations/Connector-SDK/WRITING-A-CONNECTOR"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Connector Documentation | Docs DataLbry"><meta data-react-helmet="true" name="description" content="The documentation below contains information on how to write a connector. It provides a sample REST API, which will be"><meta data-react-helmet="true" property="og:description" content="The documentation below contains information on how to write a connector. It provides a sample REST API, which will be"><link data-react-helmet="true" rel="shortcut icon" href="/img/datalbry_logo.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.datalbry.io/Integrations/Connector-SDK/WRITING-A-CONNECTOR"><link data-react-helmet="true" rel="alternate" href="https://docs.datalbry.io/Integrations/Connector-SDK/WRITING-A-CONNECTOR" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.datalbry.io/Integrations/Connector-SDK/WRITING-A-CONNECTOR" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.6ca159e4.css">
<link rel="preload" href="/assets/js/runtime~main.b5d4e62d.js" as="script">
<link rel="preload" href="/assets/js/main.a06aa952.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="DataLbry Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="DataLbry Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="DataLbry Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="DataLbry Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/">Documentation</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">Home</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Connectors</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Clockify</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Connectors/Clockify/OVERVIEW">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">GitHub</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Connectors/GitHub/OVERVIEW">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">JetBrains Space</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Connectors/JetBrains Space/OVERVIEW">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Jira Cloud</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/Connectors/Jira Cloud/OVERVIEW">Overview</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Integrations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Connector-SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Integrations/Connector-SDK/CONCEPT">Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Integrations/Connector-SDK/OVERVIEW">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/Integrations/Connector-SDK/QUICKSTART">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/Integrations/Connector-SDK/WRITING-A-CONNECTOR">Connector Documentation</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Connector Documentation</h1></header><div class="markdown"><p>The documentation below contains information on how to write a connector. It provides a sample REST API, which will be
used to provide hands-on examples, so each and every step can be comprehended locally on your machine.</p><p>First, we are going through the requirements and setting up the REST API on your local system. Afterwards we will
continue with documentation, which is divided into the following parts:</p><ol><li>Terminology</li><li>The target API</li><li>Create a derivation graph</li><li>Create a Client</li><li>Create a connector</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><p>Initially you should make sure you have the following installed:</p><ul><li><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a></li><li><a href="https://www.oracle.com/java/technologies/downloads/" target="_blank" rel="noopener noreferrer">Java 11</a></li><li><a href="https://kotlinlang.org/" target="_blank" rel="noopener noreferrer">Kotlin</a></li><li><a href="https://gradle.org/" target="_blank" rel="noopener noreferrer">Gradle</a></li></ul><p>Additionally, you need to clone the following three repositories:</p><ul><li><a href="https://github.com/datalbry/sample-api" target="_blank" rel="noopener noreferrer">Sample API</a></li><li><a href="https://github.com/datalbry/sample-api-client" target="_blank" rel="noopener noreferrer">Sample API Client</a></li><li><a href="https://github.com/datalbry/sample-api-connector" target="_blank" rel="noopener noreferrer">Sample API Connector</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h2><p>Next we want to set up the three projects you previously pulled.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sample-api"></a>Sample API<a class="hash-link" href="#sample-api" title="Direct link to heading">#</a></h3><p>First, you need to build the OCI image locally using Docker. To achieve this simply run the following command from within the project directory</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker build -t sample-api </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker run -p </span><span class="token number" style="color:rgb(247, 140, 108)">8000</span><span class="token plain">:8000 sample-api</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The API should instantly become ready on <a href="http://127.0.0.1:8000" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000</a>. You can easily verify it by visiting
<a href="http://127.0.0.1:8000/docs" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000/docs</a>. If everything went well, the FastAPI Swagger UI should become available.</p><p><img src="/assets/images/fast_api_swagger_ui-30413a8a7797986e3bcba4f2ffde6ccd.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sample-api-client-and-sample-api-connector"></a>Sample API Client and Sample API Connector<a class="hash-link" href="#sample-api-client-and-sample-api-connector" title="Direct link to heading">#</a></h3><p>These two projects use gradle with the <code>idea</code> plugin. So you can easily import them with IntelliJ by using <code>./gradle
openIdea</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="importing-the-projects"></a>Importing the projects<a class="hash-link" href="#importing-the-projects" title="Direct link to heading">#</a></h3><p>The projects are managed by gradle. Additionally, they make use of the <code>idea</code> plugin. This makes it easy for you to
import it with IntelliJ. You just need to import the project with Gradle as the build system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="terminology"></a>Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">#</a></h2><dfn>System</dfn>: A system can be anything that provides data. For example a system could be:<ul><li>REST/SOAP endpoint</li><li>a file like a CSV</li><li>a database</li></ul><dfn>Derivation Graph</dfn>: A derivation graph in this context is a graph structure, which defines the transitions from objects. A transition means that with information from the parent you can retrieve the child from the target system.<dfn>Connector</dfn>: A connector is a collection of processors which build the transitions on the derivation graph of the system<h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-target-api"></a>The target API<a class="hash-link" href="#the-target-api" title="Direct link to heading">#</a></h2><p>We have provided a small example Toy API for this documentation. You can explore it
on <a href="http://127.0.0.1:8000/docs" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000/docs</a>. The API has been kept simple on purpose.</p><p>In the end you should see, that there are in total 5 entities</p><ul><li><code>Person</code></li><li><code>Computer</code></li><li><code>Project</code></li><li><code>OfficePet</code></li><li><code>PetToy</code></li></ul><p>and that there is a way to retrieve them from the API. For example, you can
call <a href="http://127.0.0.1:8000/api/v1/persons" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8000/api/v1/persons</a> to get all available instances
of <code>Person</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-derivation-graph"></a>Create a derivation graph<a class="hash-link" href="#create-a-derivation-graph" title="Direct link to heading">#</a></h2><p>From this toy example it can be easily read how the entities are related.</p><ul><li>Without any information we get all <code>Person</code>.</li><li>From <code>Person</code> we can then get all <code>Computer</code>.</li><li>From <code>Person</code> we can then get all <code>Project</code>.</li><li>Without any information we get all <code>OfficePet</code>.</li><li>From <code>OfficePet</code> we can then get all <code>PetToy</code>.</li></ul><p>The <strong>root</strong>-Node marks the start. This would be a graphical representation of the structure we described just now.</p><p><img alt="Derivation Tree for the toy example" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSI0NDFweCIgaGVpZ2h0PSIzMDFweCIgdmlld0JveD0iLTAuNSAtMC41IDQ0MSAzMDEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgaG9zdD0mcXVvdDtkcmF3aW8tcGx1Z2luJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjEtMTAtMjBUMTQ6NDU6NDguNTg2WiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODkuMC40Mzg5LjExNCBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7ZjhHU0VBQnFGMEhVZHlHM2FLb1kmcXVvdDsgdmVyc2lvbj0mcXVvdDsxNC43LjQmcXVvdDsgdHlwZT0mcXVvdDtlbWJlZCZxdW90OyZndDsmbHQ7ZGlhZ3JhbSBpZD0mcXVvdDsyM2lSU1VQb1Jhdm5Cdmg0ZG9jaCZxdW90OyBuYW1lPSZxdW90O1BhZ2UtMSZxdW90OyZndDs3VmROajV0QURQMDFYQ3MrMCtUYWJMcDdhTlZJcWRUdWNRUU96R3JBYUJnQzlOZDNDQ1pBaDkxRzZqYnNZVS9nWnh2Rzc5a1dXTjQycmU4bHk1T3ZHSUd3WER1cUxlL09jbDNIQ1Z4OWFaR0dFTnNQT2lTV1BDSnNBQTc4Ri9TQmhKWThnbUlTcUJDRjR2a1VEREhMSUZRVGpFbUoxVFRzaUdMNjFwekZZQUNIa0FrVC9jRWpsWFRvMnYwNDRBL0E0NlIvczdQYWRKNlU5Y0ZVU1pHd0NLc1I1TzBzYnlzUlZYZVgxbHNRTFhzOUwxM2U1MmU4bDROSnlOUTFDVDRkUXpWOWJSRHBVc2xFcVJLTU1XTmlONkNmSkpaWkJPMERiRzBOTVY4UWN3MDZHbndDcFJyU2paVUtOWlNvVkpBWGFxNSt0dWtmQXJJZVI1NjdtcDU4TnByZXlKUnNSa210K1RqMkRXbG5xODh6Q1NHT0NpeGxTRFZUUHlvbVk2QW9yNE5hTmtacFJPSTlZQXI2TFRwQWdtQ0tuNmFOd2FpLzRrdmNJSUcrSVJYbUZWbTlLekt2U0xDVUluU1dFeE1sUGRTVVNBaTllMW9wcW9Rck9PVHNYRWlsOTkrVWFGYmszVUk2OHJvVjdIazJUaUFWMUM5V1NsN1BwMlhTcjlNVjJkVm9OeEdVak5aU2ovMExONXNydVBuLzdYdFZTM2xtUzYyWGFpbkhlNS95ZVVrY2R5bE5QS09WOXlBTHpBeWxCaDJjdncvOEs4eTNhMC9uMjkyWTgrMjRNd08rZW9VQmR4eURsamM3NGNGTU85bEx0Vk5nOFBidGVPUWg3UFhSbHU0bzMxK3dvOVlHTVZ0TTgxS0JYSnlYUzgzRWkyL2ZjdExzbVFXa3ZtT3pPQzEvdHN0dGFURS92L1lTbjlxdnFLVjV1WHhCM1lBWGJRNS9oV2ZmNk9mYTIvMEcmbHQ7L2RpYWdyYW0mZ3Q7Jmx0Oy9teGZpbGUmZ3Q7Ij48ZGVmcy8+PGc+PHBhdGggZD0iTSAyNjAgODAgTCAyNjAgMTA1IEwgMTQwIDEwNSBMIDE0MCAxMjMuNjMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSAxNDAgMTI4Ljg4IEwgMTM2LjUgMTIxLjg4IEwgMTQwIDEyMy42MyBMIDE0My41IDEyMS44OCBaIiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gMjYwIDgwIEwgMjYwIDEwNSBMIDM4MCAxMDUgTCAzODAgMTIzLjYzIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMzgwIDEyOC44OCBMIDM3Ni41IDEyMS44OCBMIDM4MCAxMjMuNjMgTCAzODMuNSAxMjEuODggWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZWxsaXBzZSBjeD0iMjYwIiBjeT0iNDAiIHJ4PSI0MCIgcnk9IjQwIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDE0MCAxOTAgTCAxNDAgMjE1IEwgNjAgMjE1IEwgNjAgMjMzLjYzIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gNjAgMjM4Ljg4IEwgNTYuNSAyMzEuODggTCA2MCAyMzMuNjMgTCA2My41IDIzMS44OCBaIiBmaWxsPSIjMDAwMDAwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxwYXRoIGQ9Ik0gMTQwIDE5MCBMIDE0MCAyMTUgTCAyMjAgMjE1IEwgMjIwIDIzMy42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDIyMCAyMzguODggTCAyMTYuNSAyMzEuODggTCAyMjAgMjMzLjYzIEwgMjIzLjUgMjMxLjg4IFoiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PHJlY3QgeD0iODAiIHk9IjEzMCIgd2lkdGg9IjEyMCIgaGVpZ2h0PSI2MCIgcng9IjkiIHJ5PSI5IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTE4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTYwcHg7IG1hcmdpbi1sZWZ0OiA4MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5QZXJzb248L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iMTQwIiB5PSIxNjQiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UGVyc29uPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDM4MCAxOTAgTCAzODAgMjMzLjYzIiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRlci1ldmVudHM9InN0cm9rZSIvPjxwYXRoIGQ9Ik0gMzgwIDIzOC44OCBMIDM3Ni41IDIzMS44OCBMIDM4MCAyMzMuNjMgTCAzODMuNSAyMzEuODggWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIzMjAiIHk9IjEzMCIgd2lkdGg9IjEyMCIgaGVpZ2h0PSI2MCIgcng9IjkiIHJ5PSI5IiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC41IC0wLjUpIj48c3dpdGNoPjxmb3JlaWduT2JqZWN0IHN0eWxlPSJvdmVyZmxvdzogdmlzaWJsZTsgdGV4dC1hbGlnbjogbGVmdDsiIHBvaW50ZXItZXZlbnRzPSJub25lIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiByZXF1aXJlZEZlYXR1cmVzPSJodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0V4dGVuc2liaWxpdHkiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogdW5zYWZlIGNlbnRlcjsganVzdGlmeS1jb250ZW50OiB1bnNhZmUgY2VudGVyOyB3aWR0aDogMTE4cHg7IGhlaWdodDogMXB4OyBwYWRkaW5nLXRvcDogMTYwcHg7IG1hcmdpbi1sZWZ0OiAzMjFweDsiPjxkaXYgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMDsgdGV4dC1hbGlnbjogY2VudGVyOyAiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogIzAwMDAwMDsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+T2ZmaWNlUGV0PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjM4MCIgeT0iMTY0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk9mZmljZVBldDwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMCIgeT0iMjQwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNzBweDsgbWFyZ2luLWxlZnQ6IDFweDsiPjxkaXYgc3R5bGU9ImJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtc2l6ZTogMDsgdGV4dC1hbGlnbjogY2VudGVyOyAiPjxkaXYgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsgZm9udC1zaXplOiAxMnB4OyBmb250LWZhbWlseTogSGVsdmV0aWNhOyBjb2xvcjogIzAwMDAwMDsgbGluZS1oZWlnaHQ6IDEuMjsgcG9pbnRlci1ldmVudHM6IGFsbDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgd29yZC13cmFwOiBub3JtYWw7ICI+Q29tcHV0ZXI8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iNjAiIHk9IjI3NCIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5Db21wdXRlcjwvdGV4dD48L3N3aXRjaD48L2c+PHJlY3QgeD0iMzIwIiB5PSIyNDAiIHdpZHRoPSIxMjAiIGhlaWdodD0iNjAiIHJ4PSI5IiByeT0iOSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7IiBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDExOHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDI3MHB4OyBtYXJnaW4tbGVmdDogMzIxcHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IHdvcmQtd3JhcDogbm9ybWFsOyAiPlBldFRveTwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSIzODAiIHk9IjI3NCIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5QZXRUb3k8L3RleHQ+PC9zd2l0Y2g+PC9nPjxyZWN0IHg9IjE2MCIgeT0iMjQwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNzBweDsgbWFyZ2luLWxlZnQ6IDE2MXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5Qcm9qZWN0PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9IjIyMCIgeT0iMjc0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlByb2plY3Q8L3RleHQ+PC9zd2l0Y2g+PC9nPjwvZz48c3dpdGNoPjxnIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIvPjxhIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTUpIiB4bGluazpocmVmPSJodHRwczovL3d3dy5kaWFncmFtcy5uZXQvZG9jL2ZhcS9zdmctZXhwb3J0LXRleHQtcHJvYmxlbXMiIHRhcmdldD0iX2JsYW5rIj48dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwcHgiIHg9IjUwJSIgeT0iMTAwJSI+Vmlld2VyIGRvZXMgbm90IHN1cHBvcnQgZnVsbCBTVkcgMS4xPC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4=" title="Derivation Tree"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-client"></a>Create a Client<a class="hash-link" href="#create-a-client" title="Direct link to heading">#</a></h2><p>Next we need to create a client which can get us the data from the API. This has already been prepared for you. Now you
should open your IDE of choice with the Sample API Client project.</p><p>NOTE: We split a client into two parts. An API and the actual implementation. This is primarily being done for inversion
of control, so a consumer (such as the Connector) can rely on the API, and only requires the actual Client
implementation at runtime.</p><p><img src="/assets/images/client-project-setup-00-93e390277e672b290572b2b881e88424.png"></p><p>In the client-api are the models and the interfaces which specify the client fragments. In this case the client is split
into two parts. One for the person another for the office pet.</p><p><img src="/assets/images/client-project-setup-01-13a545c5839df34e00d2685a019a38b3.png"></p><p>The models are identical to what the API provides us. This is because feign can thereby parse with jackson the returned
values.</p><p>The client then contains the actual implementation of the client fragments. As you can see in the next image, the
clients are separated into the implementation of the interfaces and a feign resources. This is to keep everything small
and manageable.</p><p><img src="/assets/images/client-project-setup-02-e0d71a41e6e4b13a57560cb6374e6d1a.png"></p><p>In the end is the <code>SampleApiClient</code> a facade (delegation of the client fragments).</p><p>To now actually use this client you firstly need to run the docker container with the API. Next you need to add in
your <code>~/.gradle/gradle.properties</code> the following line:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">datalbry.sample.api.uri=http://127.0.0.1:8000/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>First the gradle build script sets an environment variable from this property. This is because the configuration
requires of the client needs to know the URI of the API. If you choose a different port for the Sample API you can have
to adjust the port here accordingly.</p><p>In the test is a sample usage of the client. You can find the test
in <code>client/src/test/kotlin/io/datalbry/sample/api/client/feign/SampleApiClientTest.kt</code>.</p><p><img src="/assets/images/client-project-setup-03-26f130efe7a6d793282742dcd77ff15a.png"></p><p>If you now start the test, it should pass.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-a-connector"></a>Create A Connector<a class="hash-link" href="#create-a-connector" title="Direct link to heading">#</a></h2><p>In DataLbry&#x27;s Connector SDK a connector consists of multiple processors. A processor is something that processes an edge
and produces new nodes. From the previous tree a processor would take the root-node, process it and create a new node,
like the for example <code>Person</code>. You define for every edge a processor in your graph.</p><p>This section will also utilize the already implemented project. Now you should open the sample api connector in the IDE
of your choice.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="building-blocks"></a>Building Blocks<a class="hash-link" href="#building-blocks" title="Direct link to heading">#</a></h3><p>The connector project usually is build by the following 5 blocks:</p><ul><li><dfn>Processors</dfn>: Explained previously.</li><li><dfn>Document</dfn>: A Document is a searchable Record which has to have a globally unique identifier. Even amongst documents of different types.</li><li><dfn>Record</dfn>: A Record is a specifically annotated class which then can be stored in the backend.</li><li><dfn>ContainerNode</dfn>: A container node is a collection of nodes containing the keys for other documents. Usually they are named something like `KeyNode` and the container containing them are called `KeyNodeContainer`.</li></ul><p>You may add utility functions or anything else. But the previously described blocks are the main part of connectors.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="diving-into-the-connector"></a>Diving Into The Connector<a class="hash-link" href="#diving-into-the-connector" title="Direct link to heading">#</a></h3><p>Next we are going to dive into the connector and explore it step by step. We will add one element after another it.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="first-processor"></a>First Processor<a class="hash-link" href="#first-processor" title="Direct link to heading">#</a></h4><p>First you should check out to the branch <code>00-first-processor-person-document</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> checkout 00-first-processor-person-document</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>When you open the project you should see the following project structure:</p><p><img src="/assets/images/connector-project-00-01-fd4b67d768c155fee3661676a2f03a90.png"></p><p>What you should notice here is that:</p><ul><li><code>config</code> package contains the properties which will be loaded via Spring and a connector config which will get the
properties passed via dependency injection. This one expects</li></ul><p><img src="/assets/images/connector-project-00-02-ce5be6014a8b2ca42d1f54c771cfc239.png"></p><ul><li><p><code>extensions</code> package contains extension functions of all sorts. Here we convert back and forth as we needed from the
client to the Documents/Records/KeyNodes</p></li><li><p><code>model</code> package contains all the model classes</p></li><li><p>the processors are just lying in the <code>io.datalbry.sample.api.connector</code></p></li></ul><p>How do we come from the client api to the KeyNodes, KeyNodeContainer and such?</p><p><img src="/assets/images/connector-project-00-03-869816aeddf8942a57213e202825546c.png">
<img src="/assets/images/connector-project-00-04-d87ccd062f7c8b6333fc0b28c37e2318.png"></p><p>The <code>PersonKeyNodeContainer</code> contains the <code>PersonKeyNode</code>s, and they are annotated with <code>@Children</code>. This way we tell
the Connector SDK to give them to a processor and process them. In this case you see a collection of the KeyNodes but,
you can also just have one single KeyNode here. More on that later. For now the Connector SDK will start a
<code>PersonKeyNodeToPersonDocumentProcessor</code> for every <code>PersonKeyNode</code> in this container.</p><p>To sum it up, we have two processors:</p><ul><li><code>RootToPersonKeyNodeCollectionProcessor</code>, from the naming schema you can conclude that this processor starts from the
root node and produces a <code>PersonKeyNodeContainer</code>. It should be <code>Container</code> and not <code>Collection</code>.</li><li><code>PersonKeyNodeToPersonDocumentProcessor</code>, which takes a <code>PersonKeyNode</code> and produces a <code>PersonDocument</code>.</li></ul><p>Both of them basically wrap the client and convert the objects. You can take a look.</p><p>This results at this step into the following derivation tree:</p><p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHdpZHRoPSIxNzFweCIgaGVpZ2h0PSI0MTFweCIgdmlld0JveD0iLTAuNSAtMC41IDE3MSA0MTEiIGNvbnRlbnQ9IiZsdDtteGZpbGUgaG9zdD0mcXVvdDtkcmF3aW8tcGx1Z2luJnF1b3Q7IG1vZGlmaWVkPSZxdW90OzIwMjEtMTAtMjFUMDg6MjA6MTUuOTU0WiZxdW90OyBhZ2VudD0mcXVvdDs1LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODkuMC40Mzg5LjExNCBTYWZhcmkvNTM3LjM2JnF1b3Q7IGV0YWc9JnF1b3Q7a2liMWtSM2xpSXcyQTlBaW5XNGwmcXVvdDsgdmVyc2lvbj0mcXVvdDsxNC43LjQmcXVvdDsgdHlwZT0mcXVvdDtlbWJlZCZxdW90OyZndDsmbHQ7ZGlhZ3JhbSBpZD0mcXVvdDsyM2lSU1VQb1Jhdm5Cdmg0ZG9jaCZxdW90OyBuYW1lPSZxdW90O1BhZ2UtMSZxdW90OyZndDs3WlpOajVzd0VJWi9EZGRWZ0FTU2E1UHNWbXE3cXBSRHUwY0xac0Vyd3lCakF2VFgxdzdqZ0VXeXJiUWY3V0ZQTU8vTTJNek1Zd3N2M0JiZG5XUlYvZzFURUY2d1NEc3YzSGxCNEFmTFdEK00wZy9LYXJNWWhFenlsSUpHNGNCL0FZazJyT0VwMUU2Z1FoU0tWNjZZWUZsQ29oeU5TWW10Ry9hSXd0MjFZaG5NaEVQQ3hGejl3Vk9WRCtvNmlFZjlNL0FzdHp2NzBXYndGTXdHVXlWMXpsSnNKMUs0OThLdFJGVERXOUZ0UVpqbTJiNE1lYmRYdk9jUGsxQ3F2MG1nNzZwVmIydURWSmRLSmtxVlk0WWxFL3RSL1NTeEtWTXdDeXkwTmNaOFJheTA2R3Z4Q1pUcWFXNnNVYWlsWEJXQ3ZOQng5ZE9rMzZ6SWVwaDRkaDJ0ZkRKNmE1Uks5cE1rWXo1TWZXUGF5Yko1UTMybXFLc2RJcW5HUmlZVUZSQlVUR1pBVWRGNU9ocHJ3QUwwTGpwRWdtQ0tIOTNWR2ZHVm5lUEdFZWdYbXNMbGlkRFdSeVlhV25RK0lpRTA2V1lVYmM0VkhDcDIrdTVXSHphMzBheXVCdndmZVdjR1J0MDRnbFRRUGQrUGVhV1VFQzRKWFRxNzl1aTJrNE5BVWo0NUExWjdTV3ZzOGYrZzFhVTFtdE1hdnhPdDBZelc3eUJyTEw5QWY2K3YvUzBLb1Fua1dNNG1OODdGL3pQSXI4QnRzRms1M0o2djRBbTRmbnlCM09nMXlQVm45WCtRYXpGMXlWMi9FN254OCtUK2MxN0R3TDFudy9BQ3I4RWI4YnErMHB3ZEprMWhDdmpmdXJOY3ZsMTN0RG4ra0oxOGs5L2FjUDhiJmx0Oy9kaWFncmFtJmd0OyZsdDsvbXhmaWxlJmd0OyI+PGRlZnMvPjxnPjxwYXRoIGQ9Ik0gODUgODAgTCA4NSAxMjMuNjMiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0ic3Ryb2tlIi8+PHBhdGggZD0iTSA4NSAxMjguODggTCA4MS41IDEyMS44OCBMIDg1IDEyMy42MyBMIDg4LjUgMTIxLjg4IFoiIGZpbGw9IiMwMDAwMDAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGVsbGlwc2UgY3g9Ijg1IiBjeT0iNDAiIHJ4PSI0MCIgcnk9IjQwIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMwMDAwMDAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cGF0aCBkPSJNIDg1IDE5MCBMIDg1IDIzMy42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDg1IDIzOC44OCBMIDgxLjUgMjMxLjg4IEwgODUgMjMzLjYzIEwgODguNSAyMzEuODggWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIwIiB5PSIxMzAiIHdpZHRoPSIxNzAiIGhlaWdodD0iNjAiIHJ4PSI5IiByeT0iOSIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMDAwMDAwIiBwb2ludGVyLWV2ZW50cz0iYWxsIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNSAtMC41KSI+PHN3aXRjaD48Zm9yZWlnbk9iamVjdCBzdHlsZT0ib3ZlcmZsb3c6IHZpc2libGU7IHRleHQtYWxpZ246IGxlZnQ7IiBwb2ludGVyLWV2ZW50cz0ibm9uZSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgcmVxdWlyZWRGZWF0dXJlcz0iaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNFeHRlbnNpYmlsaXR5Ij48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBzdHlsZT0iZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IHVuc2FmZSBjZW50ZXI7IGp1c3RpZnktY29udGVudDogdW5zYWZlIGNlbnRlcjsgd2lkdGg6IDE2OHB4OyBoZWlnaHQ6IDFweDsgcGFkZGluZy10b3A6IDE2MHB4OyBtYXJnaW4tbGVmdDogMXB4OyI+PGRpdiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1zaXplOiAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7ICI+PGRpdiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXNpemU6IDEycHg7IGZvbnQtZmFtaWx5OiBIZWx2ZXRpY2E7IGNvbG9yOiAjMDAwMDAwOyBsaW5lLWhlaWdodDogMS4yOyBwb2ludGVyLWV2ZW50czogYWxsOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyB3b3JkLXdyYXA6IG5vcm1hbDsgIj5QZXJzb25LZXlOb2RlQ29sbGVjdGlvbjwvZGl2PjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48dGV4dCB4PSI4NSIgeT0iMTY0IiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0iSGVsdmV0aWNhIiBmb250LXNpemU9IjEycHgiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlBlcnNvbktleU5vZGVDb2xsZWN0aW9uPC90ZXh0Pjwvc3dpdGNoPjwvZz48cGF0aCBkPSJNIDg1IDMwMCBMIDg1IDM0My42MyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJzdHJva2UiLz48cGF0aCBkPSJNIDg1IDM0OC44OCBMIDgxLjUgMzQxLjg4IEwgODUgMzQzLjYzIEwgODguNSAzNDEuODggWiIgZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHBvaW50ZXItZXZlbnRzPSJhbGwiLz48cmVjdCB4PSIyNSIgeT0iMjQwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAyNzBweDsgbWFyZ2luLWxlZnQ6IDI2cHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IHdvcmQtd3JhcDogbm9ybWFsOyAiPlBlcnNvbktleU5vZGU8L2Rpdj48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PHRleHQgeD0iODUiIHk9IjI3NCIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IkhlbHZldGljYSIgZm9udC1zaXplPSIxMnB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5QZXJzb25LZXlOb2RlPC90ZXh0Pjwvc3dpdGNoPjwvZz48cmVjdCB4PSIyNSIgeT0iMzUwIiB3aWR0aD0iMTIwIiBoZWlnaHQ9IjYwIiByeD0iOSIgcnk9IjkiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgcG9pbnRlci1ldmVudHM9ImFsbCIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjUgLTAuNSkiPjxzd2l0Y2g+PGZvcmVpZ25PYmplY3Qgc3R5bGU9Im92ZXJmbG93OiB2aXNpYmxlOyB0ZXh0LWFsaWduOiBsZWZ0OyIgcG9pbnRlci1ldmVudHM9Im5vbmUiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiB1bnNhZmUgY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHVuc2FmZSBjZW50ZXI7IHdpZHRoOiAxMThweDsgaGVpZ2h0OiAxcHg7IHBhZGRpbmctdG9wOiAzODBweDsgbWFyZ2luLWxlZnQ6IDI2cHg7Ij48ZGl2IHN0eWxlPSJib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LXNpemU6IDA7IHRleHQtYWxpZ246IGNlbnRlcjsgIj48ZGl2IHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtc2l6ZTogMTJweDsgZm9udC1mYW1pbHk6IEhlbHZldGljYTsgY29sb3I6ICMwMDAwMDA7IGxpbmUtaGVpZ2h0OiAxLjI7IHBvaW50ZXItZXZlbnRzOiBhbGw7IHdoaXRlLXNwYWNlOiBub3JtYWw7IHdvcmQtd3JhcDogbm9ybWFsOyAiPlBlcnNvbkRvY3VtZW50PC9kaXY+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0Pjx0ZXh0IHg9Ijg1IiB5PSIzODQiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJIZWx2ZXRpY2EiIGZvbnQtc2l6ZT0iMTJweCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+UGVyc29uRG9jdW1lbnQ8L3RleHQ+PC9zd2l0Y2g+PC9nPjwvZz48c3dpdGNoPjxnIHJlcXVpcmVkRmVhdHVyZXM9Imh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjRXh0ZW5zaWJpbGl0eSIvPjxhIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTUpIiB4bGluazpocmVmPSJodHRwczovL3d3dy5kaWFncmFtcy5uZXQvZG9jL2ZhcS9zdmctZXhwb3J0LXRleHQtcHJvYmxlbXMiIHRhcmdldD0iX2JsYW5rIj48dGV4dCB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjEwcHgiIHg9IjUwJSIgeT0iMTAwJSI+Vmlld2VyIGRvZXMgbm90IHN1cHBvcnQgZnVsbCBTVkcgMS4xPC90ZXh0PjwvYT48L3N3aXRjaD48L3N2Zz4="></p><p>Before we continue it is good to mention testing right now. You should always of course test your code. Next we are
going to go through very simple integration tests which will basically verify the functionality.</p><ul><li><code>src/test/kotlin/io/datalbry/sample/api/connector/extension/SampleApiConnectorTestExtension.kt</code></li><li><code>src/test/kotlin/io/datalbry/sample/api/connector/SampleApiConnectorTest.kt</code></li></ul><p>Let&#x27;s start with <code>SampleApiConnectorTestExtension</code>. This just set&#x27;s the properties from the environment and is loaded
by <code>SampleApiConnectorTest</code>.</p><p><img src="/assets/images/connector-project-00-05-87e086dafa8d8d940aa04ac716b85d57.png"></p><p>Next is the actual test.</p><p><img src="/assets/images/connector-project-00-06-a9ae10aefe529d52c1a10d1dc70ebbed.png"></p><ol><li>This is setting up a docker container for data persistence</li><li>Here we use the previous extension</li><li>The path to the datasource. This is in this case set by the <code>ConnectorTestExtension</code></li><li>The data persistence client <code>Alxndria</code></li><li>The connector engine basically</li><li>You <strong>HAVE TO REGISTER ALL DOCUMENTS AND RECORDS</strong> here. Everything you want to persist into the backend has to be
registered here!</li><li>Registering the data source at the given datasource identifier and the schemas.</li><li>Start the connector (propagating through the tree)</li><li>The propagation happens in the backend right now with an AMPQ channel. This is why we wait here. <code>awaitConvergence</code>
waits for the number of elements (given by <code>await</code>) and checks every <code>steps</code> seconds if the size of the datasource
does not change.</li><li>Then the test are run. Here we perform some test with this utility function.</li></ol><p><img src="/assets/images/connector-project-00-07-fcceb1f5af1533470bac930d9d763cab.png"></p><p>This utility function fetches does:</p><ul><li>fetches all documents of the given type <code>DocumentType</code></li><li>checks if not empty</li><li>checks if there is a document which contains the expected fields</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="second-layer"></a>Second Layer<a class="hash-link" href="#second-layer" title="Direct link to heading">#</a></h4><p>For this part please check out at the branch <code>01-processing-second-layer-documents</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> checkout 01-processing-second-layer-documents</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now we are going to extend the connector and add documents which are deeper inside the API. Documents which are more or
less indirectly reachable. This means we will have more processors. So let&#x27;s see what has been added.</p><p><img src="/assets/images/connector-project-01-01-cdc7a3568667988a18623d93c99271cb.png"></p><p>Following has been added:</p><ul><li>Document, KeyNode and KeyNodeContainer about the Computer</li><li>ProjectDocument and ProjectInformationRecord about the Project</li><li>Extension functions to transform them</li><li>Three new processors.</li></ul><p>To remind you why there is no KeyNode and KeyNodeContainer for the Project: The API didn&#x27;t offer us anything to access
it like this. So here the connector just fetches the list of Projects as the API provides us. Hence, we just take the
<code>PersonKeyNode</code> and produce a collection of <code>ProjectDocument</code>s.</p><p>Additionally, the tests have been extended accordingly.</p><p>Lastly the derivation tree at this step looks like this:</p><p><img src="/assets/images/connector-project-01-derivation-tree-74a9725c194fbc55197fe4147417f7f3.svg"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="last-branch-from-root"></a>Last Branch From Root<a class="hash-link" href="#last-branch-from-root" title="Direct link to heading">#</a></h4><p>Lastly we have to cover the remaining part from the root node. For this part please check out at the
branch <code>02-processing-office-pets</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> checkout 02-processing-office-pets</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This part of the documentation covers a case where we can retrieve a collection of documents. We don&#x27;t have a
possibility to get them by their id. Hence, we can&#x27;t first get the KeyNodeCollection, then the KeyNode and lastly the
Document itself. In the case of the OfficePetDocument we will proceed as follows. The OfficePetDocument looks like this:</p><p><img src="/assets/images/connector-project-02-01-9364aa7bf8bd4c7ca6fde446596fc8c0.png"></p><p>In this particular case we will include the KeyNode into the Document. The Connector SDK knows by the <code>@Children</code>
annotation that this value should be passed to another processor. Additionally, the <code>@Exclude</code> annotation prevents this
attribute to persist into the final schema. Meaning that the <code>keyNode</code> will not appear in the database.</p><p><img src="/assets/images/connector-project-02-derivation-tree-badbdce471eaa5a1837756ae96d31e34.svg"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sources"></a>Sources<a class="hash-link" href="#sources" title="Direct link to heading">#</a></h2><ul><li>To create the graphs we used this extension for IntelliJ
IDEA: <a href="https://plugins.jetbrains.com/plugin/15635-diagrams-net-integration" target="_blank" rel="noopener noreferrer">https://plugins.jetbrains.com/plugin/15635-diagrams-net-integration</a></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Integrations/Connector-SDK/QUICKSTART"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link">Requirements</a></li><li><a href="#setup" class="table-of-contents__link">Setup</a><ul><li><a href="#sample-api" class="table-of-contents__link">Sample API</a></li><li><a href="#sample-api-client-and-sample-api-connector" class="table-of-contents__link">Sample API Client and Sample API Connector</a></li><li><a href="#importing-the-projects" class="table-of-contents__link">Importing the projects</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link">Terminology</a></li><li><a href="#the-target-api" class="table-of-contents__link">The target API</a></li><li><a href="#create-a-derivation-graph" class="table-of-contents__link">Create a derivation graph</a></li><li><a href="#create-a-client" class="table-of-contents__link">Create a Client</a></li><li><a href="#create-a-connector" class="table-of-contents__link">Create A Connector</a><ul><li><a href="#building-blocks" class="table-of-contents__link">Building Blocks</a></li><li><a href="#diving-into-the-connector" class="table-of-contents__link">Diving Into The Connector</a></li></ul></li><li><a href="#sources" class="table-of-contents__link">Sources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4></div><div class="col footer__col"><h4 class="footer__title">More</h4></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Datalbry.io</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b5d4e62d.js"></script>
<script src="/assets/js/main.a06aa952.js"></script>
</body>
</html>